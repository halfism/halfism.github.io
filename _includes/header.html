<!-- Navigation Bar -->
<header id="navbar" class="fixed w-full top-0 z-50 glass-effect transition-colors duration-300">
    <div class="container mx-auto px-4 md:px-6 py-4">
        <nav class="flex items-center justify-between">
            <a href="/" class="text-xl font-bold text-primary flex items-center gap-2 group">
                <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-white transition-colors">
                    H
                </div>
                <span class="text-primary font-bold">halfism</span>
            </a>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center space-x-1">
                {% if page.lang == 'en' %}
                <a href="/index_en.html#about" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">About</a>
                <a href="/index_en.html#projects" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">Projects</a>
                <a href="/index_en.html#skills" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">Skills</a>
                <a href="/gallery.html" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">Gallery</a>
                <a href="/blog.html" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">Blog</a>
                <a href="/index_en.html#contact" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">Contact</a>
                {% else %}
                <a href="/#about" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">关于</a>
                <a href="/#projects" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">项目</a>
                <a href="/#skills" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">技能</a>
                <a href="/gallery.html" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">相册</a>
                <a href="/blog.html" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">博客</a>
                <a href="/#contact" class="btn-secondary border-none hover:bg-gray-100 dark:hover:bg-gray-800 text-sm">联系</a>
                {% endif %}
                
                <div class="h-6 w-px bg-gray-200 dark:bg-gray-700 mx-2"></div>
                
                <div class="flex items-center gap-4">
                    <!-- Language Switcher Dropdown -->
                    <div class="relative group">
                        <button class="flex items-center text-gray-500 hover:text-gray-900 dark:hover:text-gray-300 transition-colors focus:outline-none py-2">
                            <i class="fa fa-language text-lg" aria-hidden="true"></i>
                            <i class="fa fa-chevron-down ml-1 text-[10px] opacity-50"></i>
                        </button>
                        
                        <!-- Dropdown Menu -->
                        <div class="absolute right-0 mt-0 w-32 bg-white dark:bg-[#161b22] border border-gray-200 dark:border-gray-700 rounded-md shadow-lg py-1 hidden group-hover:block z-50">
                            <a href="/" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 flex justify-between items-center">
                                简体中文
                                {% unless page.lang == 'en' %}<i class="fa fa-check text-primary text-xs"></i>{% endunless %}
                            </a>
                            <a href="/index_en.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 flex justify-between items-center">
                                English
                                {% if page.lang == 'en' %}<i class="fa fa-check text-primary text-xs"></i>{% endif %}
                            </a>
                        </div>
                    </div>

                    <!-- Theme Toggle Switch -->
                    <button onclick="toggleTheme()" class="relative inline-flex items-center h-6 rounded-full w-11 bg-gray-200 dark:bg-gray-700 transition-colors focus:outline-none" aria-label="Toggle Dark Mode">
                        <span class="sr-only">Toggle Dark Mode</span>
                        <span id="theme-switch-knob" class="inline-block w-4 h-4 transform bg-white rounded-full transition-transform duration-200 ease-in-out translate-x-1 flex items-center justify-center">
                             <i id="theme-switch-icon" class="fa fa-sun-o text-[10px] text-yellow-500"></i>
                        </span>
                    </button>
                    
                    <a href="https://github.com/{{ site.github_username }}" target="_blank" class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-300 transition-colors">
                        <i class="fa fa-github text-lg"></i>
                    </a>
                </div>
            </div>

            <!-- Mobile Menu Button -->
            <button id="menu-toggle" class="md:hidden text-gray-700 dark:text-gray-300 focus:outline-none p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800">
                <i class="fa fa-bars text-xl"></i>
            </button>
        </nav>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="md:hidden hidden mt-4 pb-4 border-t border-gray-100 dark:border-gray-800">
            <div class="flex flex-col space-y-1 mt-2">
                <a href="/#about" class="px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium">关于</a>
                <a href="/#projects" class="px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium">项目</a>
                <a href="/#skills" class="px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium">技能</a>
                <a href="/gallery.html" class="px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium">相册</a>
                <a href="/blog.html" class="px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium">博客</a>
                <a href="/#contact" class="px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium">联系</a>
                <div class="border-t border-gray-100 dark:border-gray-800 my-2"></div>
                <a href="https://github.com/{{ site.github_username }}" target="_blank" class="px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium flex items-center gap-2">
                    <i class="fa fa-github"></i> GitHub
                </a>
                <button onclick="toggleTheme()" class="w-full text-left px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium flex items-center gap-2">
                    <i id="theme-icon-mobile" class="fa fa-moon-o"></i> 切换主题
                </button>
                {% if page.lang %}
                    {% if page.lang == "en" %}
                    <a href="/" class="px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium">
                        Switch to Chinese
                    </a>
                    {% else %}
                    <a href="/index_en.html" class="px-4 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium">
                        Switch to English
                    </a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</header>
